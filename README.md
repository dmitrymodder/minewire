# Minewire Server

–ü—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä Minewire, –º–∞—Å–∫–∏—Ä—É—é—â–∏–π—Å—è –ø–æ–¥ —Å–µ—Ä–≤–µ—Ä Minecraft –¥–ª—è –æ–±—Ö–æ–¥–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –∏ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö —Ç—É–Ω–Ω–µ–ª–µ–π.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üîí **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ AES-GCM** - –≤–µ—Å—å —Ç—Ä–∞—Ñ–∏–∫ —à–∏—Ñ—Ä—É–µ—Ç—Å—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø–∞—Ä–æ–ª—è –∫–ª–∏–µ–Ω—Ç–∞
- üéÆ **–ú–∞—Å–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–¥ Minecraft** - —Å–µ—Ä–≤–µ—Ä –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ –æ–±—ã—á–Ω—ã–π Minecraft —Å–µ—Ä–≤–µ—Ä –ø—Ä–∏ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏
- üöÄ **–ú—É–ª—å—Ç–∏–ø–ª–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ** - –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —á–µ—Ä–µ–∑ –æ–¥–∏–Ω —Ç—É–Ω–Ω–µ–ª—å (yamux)
- üë• **–°–∏–º—É–ª—è—Ü–∏—è –∏–≥—Ä–æ–∫–æ–≤** - —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–∞—è –∏–º–∏—Ç–∞—Ü–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏–≥—Ä–æ–∫–æ–≤ –æ–Ω–ª–∞–π–Ω
- üîê **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ –ø–∞—Ä–æ–ª—é** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å —Ä–∞–∑–Ω—ã–º–∏ –ø–∞—Ä–æ–ª—è–º–∏

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Linux —Å–µ—Ä–≤–µ—Ä (Ubuntu, Debian –∏ —Ç.–¥.)
- Go 1.19 –∏–ª–∏ –Ω–æ–≤–µ–µ (–¥–ª—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏)
- –ü—Ä–∞–≤–∞ root (–¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏)
- –û—Ç–∫—Ä—ã—Ç—ã–π –ø–æ—Ä—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 25565)

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –ë—ã—Å—Ç—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
cd server
sudo bash setup.sh
```

–°–∫—Ä–∏–ø—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç –Ω–∞–ª–∏—á–∏–µ Go –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞
2. –°–∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç —Å–µ—Ä–≤–µ—Ä
3. –°–æ–∑–¥–∞—Å—Ç —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `minewire`
4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç –±–∏–Ω–∞—Ä–Ω—ã–π —Ñ–∞–π–ª –≤ `/usr/local/bin/minewire-server`
5. –°–æ–∑–¥–∞—Å—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ `/etc/minewire/server.yaml`
6. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç systemd —Å–µ—Ä–≤–∏—Å
7. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç systemd

### –†—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

–ï—Å–ª–∏ –≤—ã –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É –≤—Ä—É—á–Ω—É—é:

```bash
# –ö–æ–º–ø–∏–ª—è—Ü–∏—è
cd server
go build -o minewire-server

# –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
sudo useradd --system --no-create-home --shell /bin/false minewire

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–∏–Ω–∞—Ä–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
sudo install -m 755 minewire-server /usr/local/bin/minewire-server

# –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
sudo mkdir -p /etc/minewire
sudo cp server.yaml /etc/minewire/server.yaml
sudo cp server-icon.png /etc/minewire/server-icon.png
sudo chown -R minewire:minewire /etc/minewire
sudo chmod 750 /etc/minewire
sudo chmod 640 /etc/minewire/server.yaml

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–∏—Å–∞
sudo cp minewire-server.service /etc/systemd/system/
sudo systemctl daemon-reload
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```bash
sudo nano /etc/minewire/server.yaml
```

### 2. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö –ø–∞—Ä–æ–ª–µ–π

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ OpenSSL –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–ª—É—á–∞–π–Ω—ã—Ö –ø–∞—Ä–æ–ª–µ–π:

```bash
openssl rand -hex 16
```

–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞: `3d7e8a190604e9da51a3543a23421d20`

### 3. –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```yaml
# –ü–æ—Ä—Ç –¥–ª—è –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ä—Ç Minecraft)
listen_port: "25565"

# –°–ø–∏—Å–æ–∫ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö –ø–∞—Ä–æ–ª–µ–π (–∑–∞–º–µ–Ω–∏—Ç–µ –ø—Ä–∏–º–µ—Ä—ã –Ω–∞ —Å–≤–æ–∏!)
passwords:
  - "–í–ê–®_–ü–ê–†–û–õ–¨_1_–ó–î–ï–°–¨"
  - "–í–ê–®_–ü–ê–†–û–õ–¨_2_–ó–î–ï–°–¨"

# –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ Minecraft —Å–µ—Ä–≤–µ—Ä–∞ (–¥–ª—è –º–∞—Å–∫–∏—Ä–æ–≤–∫–∏)
version_name: "1.21.10"
protocol_id: 773
icon_path: "server-icon.png"
motd: "¬ßbMinewire Proxy Server\\n¬ßeSecure Tunnel Active"

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏–º—É–ª—è—Ü–∏–∏ –∏–≥—Ä–æ–∫–æ–≤
max_players: 20
online_min: 4
online_max: 20
```

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–∫–æ–Ω–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ó–∞–º–µ–Ω–∏—Ç–µ `server-icon.png` –Ω–∞ —Å–≤–æ—é –∏–∫–æ–Ω–∫—É (64x64 –ø–∏–∫—Å–µ–ª—è, PNG —Ñ–æ—Ä–º–∞—Ç):

```bash
sudo cp your-icon.png /etc/minewire/server-icon.png
sudo chown minewire:minewire /etc/minewire/server-icon.png
```

## –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–º

### –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
sudo systemctl start minewire-server
```

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

```bash
sudo systemctl stop minewire-server
```

### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
sudo systemctl restart minewire-server
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

```bash
sudo systemctl status minewire-server
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –ª–æ–≥–æ–≤
sudo journalctl -u minewire-server -n 50

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
sudo journalctl -u minewire-server -f
```

### –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–∏—Å—Ç–µ–º—ã

```bash
# –í–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
sudo systemctl enable minewire-server

# –û—Ç–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
sudo systemctl disable minewire-server
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∞–π—Ä–≤–æ–ª–∞ (UFW)

```bash
# –†–∞–∑—Ä–µ—à–∏—Ç—å –ø–æ—Ä—Ç Minewire
sudo ufw allow 25565/tcp

# –í–∫–ª—é—á–∏—Ç—å —Ñ–∞–π—Ä–≤–æ–ª
sudo ufw enable
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∞–π—Ä–≤–æ–ª–∞ (firewalld)

```bash
# –†–∞–∑—Ä–µ—à–∏—Ç—å –ø–æ—Ä—Ç Minewire
sudo firewall-cmd --permanent --add-port=25565/tcp
sudo firewall-cmd --reload
```

## –£–¥–∞–ª–µ–Ω–∏–µ

–î–ª—è –ø–æ–ª–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞:

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ –æ—Ç–∫–ª—é—á–∏—Ç—å —Å–µ—Ä–≤–∏—Å
sudo systemctl stop minewire-server
sudo systemctl disable minewire-server

# –£–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª—ã
sudo rm /usr/local/bin/minewire-server
sudo rm /etc/systemd/system/minewire-server.service
sudo rm -rf /etc/minewire

# –£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
sudo userdel minewire

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å systemd
sudo systemctl daemon-reload
```

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–ú–∞—Å–∫–∏—Ä–æ–≤–∫–∞**: –°–µ—Ä–≤–µ—Ä –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –∑–∞–ø—Ä–æ—Å—ã —Å—Ç–∞—Ç—É—Å–∞ Minecraft, –ø–æ–∫–∞–∑—ã–≤–∞—è —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
2. **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**: –ö–ª–∏–µ–Ω—Ç –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ —Ö–µ—à–∞ –ø–∞—Ä–æ–ª—è
3. **–¢—É–Ω–Ω–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ü–æ—Å–ª–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π yamux —Ç—É–Ω–Ω–µ–ª—å
4. **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ**: –í–µ—Å—å —Ç—Ä–∞—Ñ–∏–∫ —à–∏—Ñ—Ä—É–µ—Ç—Å—è AES-GCM –∏ –º–∞—Å–∫–∏—Ä—É–µ—Ç—Å—è –ø–æ–¥ –ø–∞–∫–µ—Ç—ã —á–∞–Ω–∫–æ–≤ Minecraft
5. **–ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ö–∞–∂–¥—ã–π yamux —Å—Ç—Ä–∏–º –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ —Ü–µ–ª–µ–≤–æ–º—É –∞–¥—Ä–µ—Å—É

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

- `main.go` - —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞, –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- `handler.go` - –ª–æ–≥–∏–∫–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞, —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ, —Ç—É–Ω–Ω–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
- `protocol.go` - –ø—Ä–∏–º–∏—Ç–∏–≤—ã –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ Minecraft (VarInt, String –∏ —Ç.–¥.)
- `server.yaml` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞
- `minewire-server.service` - systemd —Å–µ—Ä–≤–∏—Å
- `setup.sh` - —Å–∫—Ä–∏–ø—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT
